# xiaosai
## 为什么电价是0.4
电价设置为 0.4 元/kWh 是一个合理的默认假设值，常用于光伏收益估算中，尤其在中国大陆地区。这个值通常来源于：

工商业用电的脱硫电价回收价格（不含税）；

或者一些地方光伏上网电价的平均水平；

若是自发自用型电站，也可以认为是企业用电成本替代值。
## 绿线（累计发电损失）与蓝线（累计清洗成本）在2元/kW处相交


这表示：当清洗价格为 2 元/kW 时，累计的清洗支出与未清洗导致的发电损失相当；

换句话说，2 元/kW 是一个临界点，在这个价格下进行清洗既不会多花成本，也不会因积灰损失更多发电收益。

分析结论可以这样表述：
通过模拟不同清洗价格下的累计清洗成本与发电损失，当价格为 2 元/kW 时，两者相等，表示此价格点最为经济合理。若清洗成本低于 2 元/kW，频繁清洗是划算的；若高于 2 元/kW，减少清洗次数反而更优。因此，在实际运维中，应密切关注市场清洗报价与电站的发电效率波动，动态调整清洗策略。

以下是针对光伏板清洗优化问题的三道题的详细总结与分析：

---

### **第一题：基于历史数据，识别清洗事件的时间点**

**问题描述**：
光伏电站在运行中，面临积灰、鸟粪等污染物影响，导致光伏板效率下降。清洗后通常会看到发电效率的明显恢复。我们需要从历史数据中自动识别出这些清洗行为发生的时间节点（如 2024/5/20），而不是依赖人工记录。

**解决思路**：

1. 使用 XGBoost 模型预测每日发电量；
2. 将实际发电量与模型预测值进行比较，计算 **预测残差（残差 = 预测值 - 实际值）**；
3. 假设在长期积灰后，实际发电量将低于预测值；而一旦清洗，实际发电量会突然升高，残差会出现“从负转正”的明显跳变；
4. 通过对残差的突变进行检测（例如：使用滚动均值变化率、残差一阶差分、阈值判断等），定位清洗行为发生的时间点。

**结果示例**：
最终可以得到一系列日期（如 2024/5/20、2024/7/15、2024/9/01 等），代表可能进行了清洗。

---

### **第二题：给出模型评估与误差分析**

**问题描述**：
构建一个发电预测模型，用于分析清洗对发电效率的影响。评估模型性能是保证识别准确性的基础。

**解决思路**：

1. 使用回归模型（XGBoost）来预测发电量，输入特征包括：光照（辐照量）、温度、湿度、风速、时间（小时、月份）等；
2. 模型训练后，使用 RMSE、R² 等指标对预测效果进行评估；
3. 可视化实际 vs 预测值曲线，辅助观察模型误差与残差趋势。

**评估结果举例**：

* RMSE（均方根误差）：约 1.2 kWh（表示预测值与实际值差异不大）；
* R²（决定系数）：约 0.94（说明模型解释了 94% 的方差，拟合优良）；
* 预测曲线整体与实际发电曲线趋势一致，能准确反映发电能力下降或恢复。

---

### **第三题：综合经济因素动态决策清洗时机，并分析清洗价格影响**

**问题描述**：
清洗光伏板可提升发电效率，但存在成本（如人工、设备、水等）。若频繁清洗，支出增加；若不清洗，则发电损失增大。我们要找出一个平衡点——**即最优清洗策略**。并分析清洗价格变化如何影响该策略。

**解决思路**：

1. **建模思路**：

   * 假设每日存在一个“损失因子”，表示积灰造成的发电量损失；
   * 模拟每种清洗价格（如 1\~5 元/kW）下，累计的：

     * 发电损失（转化为金钱损失，电价按 0.4 元/kWh）；
     * 清洗成本（根据装机容量 × 次数 × 单价）；
   * 每次当累积损失超过一次清洗成本时，触发清洗；
2. **分析比较**：

   * 画出每种价格下的：

     * 累计损失 vs 时间；
     * 累计清洗成本；
     * 清洗触发次数；
   * 找出损失曲线与清洗成本曲线的交点，即两者相等时的清洗价格临界点。

**结果示例**：

* 当清洗价格为 **2 元/kW** 时，累计清洗成本与损失相等；
* 若价格高于 2 元/kW，建议延长清洗周期；
* 若低于 2 元/kW，则可更频繁清洗，提升整体收益；
* **电站装机容量为 4998.3 kWp**，按电价 0.4 元/kWh 计算，对经济影响较敏感。

---

### **总结建议**：

1. 清洗行为可借助模型残差分析自动识别，提升运维智能化；
2. 高质量预测模型（如 XGBoost）是实现上述功能的关键；
3. 清洗策略应结合电价、装机容量与市场清洗价格综合决策；
4. 推荐构建一个自动化决策系统，持续输入气象数据、预测发电量、计算经济临界点，辅助调度运维计划。

---

